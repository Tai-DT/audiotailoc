# ==========================================================================
# üîß Environment Configuration Template for Audio T√†i L·ªôc Backend
# ==========================================================================
# Copy this file to .env and update the values with your actual credentials

# Database Configuration
# Prisma uses PostgreSQL in this project.
# For local dev with docker-compose in /backend, keep these aligned with the container credentials.
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/audiotailoc?schema=public"
# Used by Prisma for migrations/shadow DB operations.
DIRECT_DATABASE_URL="postgresql://postgres:postgres@localhost:5432/audiotailoc?schema=public"

# Legacy/optional (some scripts may reference this)
POSTGRES_URL="postgresql://postgres:postgres@localhost:5432/audiotailoc?schema=public"

# JWT Configuration
JWT_ACCESS_SECRET="your-jwt-access-secret-key-change-in-production"
JWT_REFRESH_SECRET="your-jwt-refresh-secret-key-change-in-production"
JWT_ACCESS_EXPIRES_IN="15m"
JWT_REFRESH_EXPIRES_IN="7d"

# üí≥ PayOS Configuration (Thanh to√°n)
# ƒêƒÉng k√Ω t·∫°i: https://payos.vn
PAYOS_CLIENT_ID="your-payos-client-id"
PAYOS_API_KEY="your-payos-api-key"  
PAYOS_CHECKSUM_KEY="your-payos-checksum-key"
PAYOS_PARTNER_CODE="your-payos-partner-code"
PAYOS_API_URL="https://api.payos.vn"

# Dev-only: allow bypassing PayOS webhook signature verification when payload contains `test: true`.
# NEVER enable this in production.
PAYOS_ALLOW_TEST_WEBHOOK="false"

# Canonical webhook endpoint (configure this in PayOS dashboard)
PAYOS_WEBHOOK_URL="http://localhost:3010/api/v1/payments/payos/webhook"
PAYOS_RETURN_URL="http://localhost:3000/checkout/return"
PAYOS_CANCEL_URL="http://localhost:3000/checkout/cancel"

# VNPay Configuration
VNPAY_TMN_CODE="your-vnpay-tmn-code"
VNPAY_HASH_SECRET="your-vnpay-hash-secret"
VNPAY_URL="https://sandbox.vnpayment.vn/paymentv2/vpcpay.html"
VNPAY_RETURN_URL="http://localhost:3000/checkout/return"

# MoMo Configuration
MOMO_PARTNER_CODE="your-momo-partner-code"
MOMO_ACCESS_KEY="your-momo-access-key"
MOMO_SECRET_KEY="your-momo-secret-key"
MOMO_ENDPOINT="https://test-payment.momo.vn/v2/gateway/api/create"

# Server Configuration
PORT="3010"
NODE_ENV="development"
API_VERSION="v1"

# Redis Configuration (Cache)
REDIS_URL="redis://localhost:6379"
REDIS_PASSWORD=""
REDIS_DB=0

# Email Configuration
SMTP_HOST="smtp.gmail.com"
SMTP_PORT="587"
SMTP_SECURE="false"
SMTP_USER="your-email@gmail.com"
SMTP_PASS="your-app-password"
EMAIL_FROM="noreply@audiotailoc.vn"

# File Storage Configuration
CLOUDINARY_CLOUD_NAME="your-cloudinary-cloud-name"
CLOUDINARY_API_KEY="your-cloudinary-api-key"
CLOUDINARY_API_SECRET="your-cloudinary-api-secret"
CDN_URL=""
API_PUBLIC_URL="http://localhost:3010"
SIGNED_URL_SECRET="change-me"
SIGNED_URL_TTL_SECONDS="300"
SIGNED_URL_ENFORCE="false"

# MinIO Configuration (Alternative file storage)
MINIO_ENDPOINT="localhost"
MINIO_PORT="9000"
MINIO_ACCESS_KEY="minioadmin"
MINIO_SECRET_KEY="minioadmin"
MINIO_BUCKET_NAME="audiotailoc"

# ü§ñ Google AI Configuration
# Option 1: Standard Gemini API
GOOGLE_AI_API_KEY="your-google-ai-api-key"
GOOGLE_GEMINI_API_KEY="your-gemini-api-key"

# Option 2: Antigravity Proxy (Recommended for development)
ANTIGRAVITY_API_KEY="your-antigravity-api-key"
ANTIGRAVITY_PROXY_URL="http://127.0.0.1:8080"

# Gemini Model Configuration
# Available models: gemini-2.5-flash-thinking, gemini-3-pro-image, gemini-2.0-flash
GEMINI_MODEL="gemini-2.5-flash-thinking"

# Search Configuration (MeiliSearch)
MEILI_MASTER_KEY="your-meilisearch-master-key"
MEILI_URL="http://localhost:7700"

# Maps Integration
GOONG_API_KEY="your-goong-api-key"

# Rate Limiting
THROTTLE_TTL="60"
THROTTLE_LIMIT="100"

# Auth security (dev defaults are lenient)
# In development, login lockout is disabled by default unless you set this to false.
DISABLE_LOGIN_LOCKOUT="true"
MAX_LOGIN_ATTEMPTS="5"
LOCKOUT_DURATION="15"  # minutes

# CORS Configuration
# Backend supports both CORS_ORIGIN and CORS_ORIGINS.
CORS_ORIGINS="http://localhost:3000,http://localhost:3001,http://localhost:3002"

# Logging
LOG_LEVEL="debug"
LOG_FILE="true"

# Security
BCRYPT_ROUNDS="10"
SESSION_SECRET="your-session-secret-key"

# Frontend URLs
FRONTEND_URL="http://localhost:3000"
DASHBOARD_URL="http://localhost:3001"
ADMIN_URL="http://localhost:3002"

# Webhook Configuration
WEBHOOK_SECRET="your-webhook-secret-key"

# Admin API Key (optional)
# If set, requests may authenticate using header `X-Admin-Key: <ADMIN_API_KEY>`.
ADMIN_API_KEY=""

# Analytics
ANALYTICS_ENABLED="true"

# Development
DEBUG="true"
SEED_DATA="true"

# Feature Flags
# Enable Cart, Promotions, and Checkout modules
FEATURE_CHECKOUT="true"

# Admin bootstrap (used by scripts like `npm run seed` / `npm run create-admin`)
# NOTE: Do not set weak passwords for non-local DBs.
ADMIN_EMAIL="admin@audiotailoc.com"
ADMIN_PASSWORD="change-me"
ADMIN_NAME="Administrator"
