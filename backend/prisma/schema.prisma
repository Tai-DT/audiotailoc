generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model activity_logs {
  id         String   @id
  userId     String?
  action     String
  resource   String?
  resourceId String?
  details    String?
  ipAddress  String?
  userAgent  String?
  method     String?
  url        String?
  statusCode Int?
  duration   Int?
  category   String   @default("user_activity")
  severity   String   @default("info")
  createdAt  DateTime @default(now())
  users      users?   @relation(fields: [userId], references: [id])

  @@index([action])
  @@index([category])
  @@index([createdAt])
  @@index([userId])
}

model banners {
  id             String    @id
  title          String
  subtitle       String?
  description    String?
  imageUrl       String
  mobileImageUrl String?
  linkUrl        String?
  buttonLabel    String?
  page           String    @default("home")
  locale         String?
  position       Int       @default(0)
  isActive       Boolean   @default(true)
  startAt        DateTime?
  endAt          DateTime?
  isDeleted      Boolean   @default(false)
  createdAt      DateTime  @default(now())
  updatedAt      DateTime

  @@index([isActive])
  @@index([isDeleted])
  @@index([page])
  @@index([position])
}

model blog_articles {
  id              String          @id
  title           String
  slug            String          @unique
  content         String
  excerpt         String?
  imageUrl        String?
  categoryId      String
  authorId        String
  status          String          @default("DRAFT")
  publishedAt     DateTime?
  viewCount       Int             @default(0)
  likeCount       Int             @default(0)
  commentCount    Int             @default(0)
  seoTitle        String?
  seoDescription  String?
  seoKeywords     String?
  createdAt       DateTime        @default(now())
  updatedAt       DateTime
  featured        Boolean         @default(false)
  users           users           @relation(fields: [authorId], references: [id])
  blog_categories blog_categories @relation(fields: [categoryId], references: [id])
  blog_comments   blog_comments[]

  @@index([authorId])
  @@index([categoryId])
  @@index([featured])
  @@index([publishedAt])
  @@index([status])
}

model blog_categories {
  id                    String            @id
  name                  String
  slug                  String            @unique
  description           String?
  imageUrl              String?
  parentId              String?
  isActive              Boolean           @default(true)
  sortOrder             Int               @default(0)
  createdAt             DateTime          @default(now())
  updatedAt             DateTime
  blog_articles         blog_articles[]
  blog_categories       blog_categories?  @relation("blog_categoriesToblog_categories", fields: [parentId], references: [id])
  other_blog_categories blog_categories[] @relation("blog_categoriesToblog_categories")

  @@index([isActive])
  @@index([parentId])
}

model blog_comments {
  id            String        @id
  articleId     String
  authorId      String?
  authorName    String?
  authorEmail   String?
  content       String
  isApproved    Boolean       @default(false)
  createdAt     DateTime      @default(now())
  updatedAt     DateTime
  blog_articles blog_articles @relation(fields: [articleId], references: [id])
  users         users?        @relation(fields: [authorId], references: [id])

  @@index([articleId])
  @@index([isApproved])
}

model campaign_clicks {
  id             String    @id
  campaignId     String
  recipientEmail String?
  url            String?
  createdAt      DateTime  @default(now())
  campaigns      campaigns @relation(fields: [campaignId], references: [id])

  @@index([campaignId])
}

model campaign_opens {
  id             String    @id
  campaignId     String
  recipientEmail String?
  createdAt      DateTime  @default(now())
  campaigns      campaigns @relation(fields: [campaignId], references: [id])

  @@index([campaignId])
}

model campaign_recipients {
  id         String    @id
  campaignId String
  email      String
  name       String?
  createdAt  DateTime  @default(now())
  campaigns  campaigns @relation(fields: [campaignId], references: [id])

  @@index([campaignId])
}

model campaigns {
  id                  String                @id
  name                String
  description         String
  type                CampaignType
  status              CampaignStatus        @default(DRAFT)
  targetAudience      String?
  discountPercent     Int?
  discountAmount      Int?
  startDate           DateTime?
  endDate             DateTime?
  sentAt              DateTime?
  createdAt           DateTime              @default(now())
  updatedAt           DateTime
  content             String?
  createdBy           String?
  scheduledAt         DateTime?
  subject             String?
  templateId          String?
  campaign_clicks     campaign_clicks[]
  campaign_opens      campaign_opens[]
  campaign_recipients campaign_recipients[]
  email_templates     email_templates?      @relation(fields: [templateId], references: [id])
  email_logs          email_logs[]
}

model cart_items {
  id        String   @id
  cartId    String
  productId String
  quantity  Int
  price     BigInt
  createdAt DateTime @default(now())
  updatedAt DateTime
  carts     carts    @relation(fields: [cartId], references: [id])
  products  products @relation(fields: [productId], references: [id])

  @@unique([cartId, productId])
}

model carts {
  id         String       @id
  userId     String?
  guestId    String?
  status     String       @default("ACTIVE")
  expiresAt  DateTime?
  createdAt  DateTime     @default(now())
  updatedAt  DateTime
  cart_items cart_items[]
  users      users?       @relation(fields: [userId], references: [id])
}

model categories {
  id                    String                  @id
  name                  String
  slug                  String                  @unique
  parentId              String?
  isActive              Boolean                 @default(true)
  createdAt             DateTime                @default(now())
  updatedAt             DateTime
  canonicalUrl          String?
  description           String?
  imageUrl              String?
  metaDescription       String?
  metaKeywords          String?
  metaTitle             String?
  categories            categories?             @relation("categoriesTocategories", fields: [parentId], references: [id])
  other_categories      categories[]            @relation("categoriesTocategories")
  products              products[]
  promotions_categories promotions_categories[]

  @@index([parentId])
}

model customer_questions {
  id           String   @id
  userId       String?
  question     String
  category     String?
  satisfaction Int?
  timestamp    DateTime @default(now())
  updatedAt    DateTime
  users        users?   @relation(fields: [userId], references: [id])
}

model email_logs {
  id             String     @id
  campaignId     String?
  recipientEmail String
  subject        String
  status         String
  error          String?
  sentAt         DateTime?
  createdAt      DateTime   @default(now())
  campaigns      campaigns? @relation(fields: [campaignId], references: [id])

  @@index([campaignId])
}

model email_templates {
  id          String      @id
  name        String
  description String?
  category    String?
  subject     String
  content     String
  usageCount  Int         @default(0)
  isActive    Boolean     @default(true)
  createdAt   DateTime    @default(now())
  updatedAt   DateTime
  campaigns   campaigns[]
}

model inventory {
  id                String   @id
  productId         String   @unique
  stock             Int      @default(0)
  reserved          Int      @default(0)
  lowStockThreshold Int      @default(0)
  createdAt         DateTime @default(now())
  updatedAt         DateTime
  products          products @relation(fields: [productId], references: [id])
}

model inventory_alerts {
  id           String    @id
  productId    String
  type         String
  message      String
  threshold    Int?
  currentStock Int
  isResolved   Boolean   @default(false)
  resolvedAt   DateTime?
  createdAt    DateTime  @default(now())
  updatedAt    DateTime
  products     products  @relation(fields: [productId], references: [id])

  @@index([createdAt])
  @@index([isResolved])
  @@index([productId])
  @@index([type])
}

model inventory_movements {
  id            String   @id
  productId     String
  type          String
  quantity      Int
  previousStock Int
  newStock      Int
  reason        String?
  referenceId   String?
  referenceType String?
  userId        String?
  notes         String?
  createdAt     DateTime @default(now())
  products      products @relation(fields: [productId], references: [id])
  users         users?   @relation(fields: [userId], references: [id])

  @@index([createdAt])
  @@index([productId])
  @@index([type])
}

model inventory_reports {
  id          String   @id
  type        String
  title       String
  description String?
  parameters  String?
  data        String?
  generatedBy String?
  generatedAt DateTime @default(now())
  createdAt   DateTime @default(now())
  updatedAt   DateTime

  @@index([generatedAt])
  @@index([type])
}

model knowledge_base_entries {
  id         String    @id
  kind       String
  title      String
  content    String
  productId  String?
  tags       String?
  embedding  String?
  isActive   Boolean   @default(true)
  createdAt  DateTime  @default(now())
  updatedAt  DateTime
  helpful    Int       @default(0)
  notHelpful Int       @default(0)
  slug       String?   @unique
  viewCount  Int       @default(0)
  products   products? @relation(fields: [productId], references: [id])
}

model loyalty_accounts {
  id                 String               @id
  userId             String               @unique
  points             Int                  @default(0)
  tier               String               @default("BRONZE")
  isActive           Boolean              @default(true)
  createdAt          DateTime             @default(now())
  updatedAt          DateTime
  users              users                @relation(fields: [userId], references: [id])
  point_transactions point_transactions[]
  redemption_history redemption_history[]
}

model loyalty_rewards {
  id                 String               @id
  name               String
  description        String?
  pointsCost         Int
  value              Int
  type               String               @default("DISCOUNT")
  isActive           Boolean              @default(true)
  createdAt          DateTime             @default(now())
  redemption_history redemption_history[]
}

model newsletter_subscriptions {
  id        String   @id
  email     String   @unique
  name      String?
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime
}

model notifications {
  id        String    @id
  userId    String
  title     String
  message   String
  type      String
  isRead    Boolean   @default(false)
  createdAt DateTime  @default(now())
  data      Json?
  readAt    DateTime?
  updatedAt DateTime
  users     users     @relation(fields: [userId], references: [id])

  @@index([userId])
  @@index([isRead])
  @@index([createdAt])
}

model order_items {
  id        String   @id
  orderId   String
  productId String
  quantity  Int
  price     BigInt
  name      String?
  unitPrice BigInt?
  imageUrl  String?
  createdAt DateTime @default(now())
  updatedAt DateTime
  orders    orders   @relation(fields: [orderId], references: [id])
  products  products @relation(fields: [productId], references: [id])
}

model orders {
  id                  String                @id
  orderNo             String                @unique
  userId              String?
+   idempotencyKey      String?               @index(name: "idx_orders_idempotency")
  subtotalCents       Int                   @default(0)
  discountCents       Int                   @default(0)
  shippingCents       Int                   @default(0)
  totalCents          Int
  status              String                @default("PENDING")
  shippingAddress     String?
  shippingCoordinates String?
  promotionCode       String?
  createdAt           DateTime              @default(now())
  updatedAt           DateTime
  customer_promotions customer_promotions[]
  order_items         order_items[]
  users               users?                @relation(fields: [userId], references: [id])
  payment_intents     payment_intents[]
  payments            payments[]
}

model pages {
  id          String   @id
  slug        String   @unique
  title       String
  content     String
  isPublished Boolean  @default(false)
  createdAt   DateTime @default(now())
  updatedAt   DateTime
}

model payment_intents {
  id           String     @id
  orderId      String
  provider     String
  amountCents  Int
  status       String     @default("PENDING")
  clientSecret String?
  returnUrl    String?
  metadata     String?
  createdAt    DateTime   @default(now())
  updatedAt    DateTime
  orders       orders     @relation(fields: [orderId], references: [id])
  payments     payments[]
}

model payments {
  id              String           @id
  orderId         String
  intentId        String?
  provider        String
  amountCents     Int
  status          String           @default("PENDING")
  transactionId   String?
  metadata        String?
  createdAt       DateTime         @default(now())
  updatedAt       DateTime
  payment_intents payment_intents? @relation(fields: [intentId], references: [id])
  orders          orders           @relation(fields: [orderId], references: [id])
  refunds         refunds[]
}

model point_transactions {
  id               String           @id
  accountId        String
  amount           Int
  type             String
  description      String?
  expiresAt        DateTime?
  createdAt        DateTime         @default(now())
  loyalty_accounts loyalty_accounts @relation(fields: [accountId], references: [id])
}

model policies {
  id          String   @id
  slug        String   @unique
  title       String
  contentHtml String
  summary     String?
  type        String
  isPublished Boolean  @default(true)
  viewCount   Int      @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime
}

model product_review_reports {
  id              String          @id
  reviewId        String
  userId          String
  reason          String
  createdAt       DateTime        @default(now())
  product_reviews product_reviews @relation(fields: [reviewId], references: [id])

  @@index([reviewId])
}

model product_review_votes {
  id              String          @id
  reviewId        String
  userId          String
  isUpvote        Boolean         @default(true)
  createdAt       DateTime        @default(now())
  product_reviews product_reviews @relation(fields: [reviewId], references: [id])

  @@unique([reviewId, userId])
  @@index([reviewId])
}

model product_reviews {
  id                     String                   @id
  userId                 String
  productId              String
  rating                 Int
  title                  String?
  comment                String?
  isVerified             Boolean                  @default(false)
  status                 ReviewStatus             @default(APPROVED)
  upvotes                Int                      @default(0)
  downvotes              Int                      @default(0)
  createdAt              DateTime                 @default(now())
  updatedAt              DateTime
  images                 String?
  response               String?
  product_review_reports product_review_reports[]
  product_review_votes   product_review_votes[]
  products               products                 @relation(fields: [productId], references: [id])
  users                  users                    @relation(fields: [userId], references: [id])
}

model product_views {
  id        String   @id
  productId String
  userId    String?
  timestamp DateTime @default(now())
  duration  Int?
  products  products @relation(fields: [productId], references: [id])
  users     users?   @relation(fields: [userId], references: [id])
}

model service_reviews {
  id         String       @id
  userId     String
  serviceId  String
  bookingId  String?
  rating     Int
  title      String?
  comment    String?
  images     String?
  isVerified Boolean      @default(false)
  status     ReviewStatus @default(APPROVED)
  upvotes    Int          @default(0)
  downvotes  Int          @default(0)
  response   String?
  createdAt  DateTime     @default(now())
  updatedAt  DateTime
  services   services     @relation(fields: [serviceId], references: [id])
  users      users        @relation(fields: [userId], references: [id])

  @@index([serviceId])
  @@index([userId])
  @@index([status])
  @@index([createdAt])
}

model products {
  id                     String                   @id
  slug                   String                   @unique
  name                   String
  description            String?
  shortDescription       String?
  priceCents             BigInt
  originalPriceCents     BigInt?
  imageUrl               String?
  images                 String?
  categoryId             String?
  brand                  String?
  model                  String?
  sku                    String?                  @unique
  specifications         String?
  features               String?
  warranty               String?
  weight                 Float?
  dimensions             String?
  stockQuantity          Int                      @default(0)
  minOrderQuantity       Int                      @default(1)
  maxOrderQuantity       Int?
  maxStock               Int?
  tags                   String?
  metaTitle              String?
  metaDescription        String?
  metaKeywords           String?
  canonicalUrl           String?
  featured               Boolean                  @default(false)
  isActive               Boolean                  @default(true)
  isDeleted              Boolean                  @default(false)
  viewCount              Int                      @default(0)
  createdAt              DateTime                 @default(now())
  updatedAt              DateTime
  cart_items             cart_items[]
  inventory              inventory?
  inventory_alerts       inventory_alerts[]
  inventory_movements    inventory_movements[]
  knowledge_base_entries knowledge_base_entries[]
  order_items            order_items[]
  product_reviews        product_reviews[]
  product_views          product_views[]
  categories             categories?              @relation(fields: [categoryId], references: [id])
  promotions_products    promotions_products[]
  wishlist_items         wishlist_items[]

  @@index([categoryId])
  @@index([featured])
  @@index([isActive])
  @@index([isDeleted])
}

model projects {
  id               String    @id
  name             String
  slug             String    @unique
  description      String?
  shortDescription String?
  client           String?
  clientLogo       String?
  category         String?
  technologies     String?
  features         String?
  images           String?
  thumbnailImage   String?
  coverImage       String?
  youtubeVideoId   String?
  youtubeVideoUrl  String?
  demoUrl          String?
  githubUrl        String?
  liveUrl          String?
  startDate        DateTime?
  endDate          DateTime?
  duration         String?
  teamSize         Int?
  budget           String?
  status           String    @default("DRAFT")
  isActive         Boolean   @default(true)
  isFeatured       Boolean   @default(false)
  featured         Boolean   @default(false)
  displayOrder     Int       @default(0)
  viewCount        Int       @default(0)
  userId           String
  tags             String?
  testimonial      String?
  results          String?
  challenges       String?
  solutions        String?
  metaTitle        String?
  metaDescription  String?
  metaKeywords     String?
  ogTitle          String?
  ogDescription    String?
  ogImage          String?
  structuredData   String?
  canonicalUrl     String?
  content          String?
  galleryImages    String?
  clientLogoUrl    String?
  projectDate      DateTime?
  completionDate   DateTime?
  isDeleted        Boolean   @default(false)
  createdAt        DateTime  @default(now())
  updatedAt        DateTime
  deletedAt        DateTime?
  users            users     @relation(fields: [userId], references: [id])

  @@index([isActive])
  @@index([isFeatured])
  @@index([slug])
  @@index([status])
}

model promotions {
  id                    String                  @id
  code                  String                  @unique
  name                  String
  description           String?
  type                  String                  @default("PERCENTAGE")
  value                 Int
  isActive              Boolean                 @default(true)
  expiresAt             DateTime?
  createdAt             DateTime                @default(now())
  metadata              Json?
  updatedAt             DateTime
  conditions            Json?
  createdBy             String?
  customerSegment       String?
  isFirstPurchaseOnly   Boolean                 @default(false)
  maxDiscount           Int?
  minOrderAmount        Int?
  startsAt              DateTime?
  tierBased             Boolean                 @default(false)
  usageCount            Int                     @default(0)
  usageLimit            Int?
  versionNumber         Int                     @default(1)
  customer_promotions   customer_promotions[]
  promotion_analytics   promotion_analytics[]
  promotion_audit_logs  promotion_audit_logs[]
  promotion_versions    promotion_versions[]
  users                 users?                  @relation(fields: [createdBy], references: [id])
  promotions_categories promotions_categories[]
  promotions_products   promotions_products[]

  @@index([code])
  @@index([customerSegment])
  @@index([expiresAt])
  @@index([isActive])
  @@index([startsAt])
  @@index([type])
}

model redemption_history {
  id               String           @id
  accountId        String
  rewardId         String
  pointsUsed       Int
  status           String           @default("COMPLETED")
  createdAt        DateTime         @default(now())
  loyalty_accounts loyalty_accounts @relation(fields: [accountId], references: [id])
  loyalty_rewards  loyalty_rewards  @relation(fields: [rewardId], references: [id])
}

model refunds {
  id               String    @id
  paymentId        String
  amountCents      Int
  reason           String?
  status           String    @default("PENDING")
  providerRefundId String?
  processedAt      DateTime?
  createdAt        DateTime  @default(now())
  updatedAt        DateTime
  errorMessage     String?
  payments         payments  @relation(fields: [paymentId], references: [id])
}

model search_queries {
  id        String   @id
  query     String
  userId    String?
  timestamp DateTime @default(now())
  users     users?   @relation(fields: [userId], references: [id])
}

model service_booking_items {
  id               String           @id
  bookingId        String
  serviceItemId    String
  quantity         Int
  price            Int
  createdAt        DateTime         @default(now())
  service_bookings service_bookings @relation(fields: [bookingId], references: [id])
  service_items    service_items    @relation(fields: [serviceItemId], references: [id])
}

model service_bookings {
  id                     String                   @id
  userId                 String?
  serviceId              String
  technicianId           String?
  status                 String                   @default("PENDING")
  scheduledAt            DateTime?
  scheduledTime          String?
  completedAt            DateTime?
  notes                  String?
  estimatedCosts         Int?                     @default(0)
  actualCosts            Int?
  createdAt              DateTime                 @default(now())
  updatedAt              DateTime
  address                String?
  coordinates            String?
  goongPlaceId           String?
  customerName           String?
  customerPhone          String?
  customerEmail          String?
  service_booking_items  service_booking_items[]
  services               services                 @relation(fields: [serviceId], references: [id])
  technicians            technicians?             @relation(fields: [technicianId], references: [id])
  users                  users?                   @relation(fields: [userId], references: [id])
  service_payments       service_payments[]
  service_status_history service_status_history[]
}

model service_items {
  id                    String                  @id
  serviceId             String
  name                  String
  price                 Int
  quantity              Int
  createdAt             DateTime                @default(now())
  updatedAt             DateTime
  service_booking_items service_booking_items[]
  services              services                @relation(fields: [serviceId], references: [id])
}

model service_payments {
  id               String           @id
  bookingId        String
  provider         String
  amountCents      Int
  status           String           @default("PENDING")
  transactionId    String?
  paidAt           DateTime?
  createdAt        DateTime         @default(now())
  service_bookings service_bookings @relation(fields: [bookingId], references: [id])
}

model service_status_history {
  id               String           @id
  bookingId        String
  status           String
  newStatus        String
  note             String?
  changedBy        String?
  createdAt        DateTime         @default(now())
  service_bookings service_bookings @relation(fields: [bookingId], references: [id])
}

model service_types {
  id          String     @id
  name        String
  slug        String     @unique
  description String?
  icon        String?
  color       String?
  isActive    Boolean    @default(true)
  sortOrder   Int        @default(0)
  createdAt   DateTime   @default(now())
  updatedAt   DateTime
  services    services[]

  @@index([isActive])
  @@index([sortOrder])
}

model service_views {
  id        String   @id
  serviceId String
  userId    String?
  timestamp DateTime @default(now())
  duration  Int?
  services  services @relation(fields: [serviceId], references: [id])
  users     users?   @relation(fields: [userId], references: [id])
}

model services {
  id               String             @id
  slug             String             @unique
  name             String
  description      String?
  shortDescription String?
  basePriceCents   Int                @default(0)
  price            Int                @default(0)
  minPrice         Int?
  maxPrice         Int?
  priceType        String             @default("FIXED")
  duration         Int
  typeId           String?
  images           String?
  isActive         Boolean            @default(true)
  isFeatured       Boolean            @default(false)
  seoTitle         String?
  seoDescription   String?
  type             String?
  tags             String?
  features         String?
  requirements     String?
  metadata         String?
  viewCount        Int                @default(0)
  createdAt        DateTime           @default(now())
  updatedAt        DateTime
  service_bookings service_bookings[]
  service_items    service_items[]
  service_reviews  service_reviews[]
  service_views    service_views[]
  service_types    service_types?     @relation(fields: [typeId], references: [id])

  @@index([isActive])
  @@index([isFeatured])
  @@index([typeId])
}

model site_settings {
  id        String   @id
  key       String   @unique
  value     String
  createdAt DateTime @default(now())
  updatedAt DateTime
}

model site_stats {
  id           String   @id
  key          String   @unique
  value        String
  label        String
  description  String?
  icon         String?
  isActive     Boolean  @default(true)
  displayOrder Int      @default(0)
  createdAt    DateTime @default(now())
  updatedAt    DateTime

  @@index([displayOrder])
  @@index([isActive])
}

model software {
  id          String   @id
  name        String
  slug        String   @unique
  description String?
  category    String
  platform    String
  version     String?
  downloadUrl String?
  websiteUrl  String?
  imageUrl    String?
  features    String?
  isActive    Boolean  @default(true)
  isDeleted   Boolean  @default(false)
  createdAt   DateTime @default(now())
  updatedAt   DateTime
}

model system_configs {
  id        String   @id
  key       String   @unique
  value     String
  type      String   @default("STRING")
  createdAt DateTime @default(now())
  updatedAt DateTime
}

model technician_schedules {
  id           String      @id
  technicianId String
  date         DateTime
  startTime    String
  endTime      String
  isAvailable  Boolean     @default(true)
  createdAt    DateTime    @default(now())
  technicians  technicians @relation(fields: [technicianId], references: [id])
}

model technicians {
  id                   String                 @id
  name                 String
  email                String                 @unique
  phone                String?
  specialties          String?
  isActive             Boolean                @default(true)
  createdAt            DateTime               @default(now())
  service_bookings     service_bookings[]
  technician_schedules technician_schedules[]
}

model testimonials {
  id           String   @id
  name         String
  position     String?
  company      String?
  content      String
  avatarUrl    String?
  rating       Int      @default(5)
  isActive     Boolean  @default(true)
  displayOrder Int      @default(0)
  createdAt    DateTime @default(now())
  updatedAt    DateTime

  @@index([displayOrder])
  @@index([isActive])
}

model users {
  id                   String                 @id
  email                String                 @unique
  password             String?
  name                 String?
  phone                String?
  role                 String                 @default("USER")
  createdAt            DateTime               @default(now())
  updatedAt            DateTime
  avatarUrl            String?
  address              String?
  dateOfBirth          DateTime?
  gender               String?
  isActive             Boolean                @default(true)
  emailNotifications   Boolean                @default(true)
  smsNotifications     Boolean                @default(false)
  promoNotifications   Boolean                @default(true)
  resetExpires         DateTime?
  resetToken           String?
  activity_logs        activity_logs[]
  blog_articles        blog_articles[]
  blog_comments        blog_comments[]
  carts                carts[]
  conversations        conversations[]
  customer_promotions  customer_promotions[]
  customer_questions   customer_questions[]
  inventory_movements  inventory_movements[]
  loyalty_accounts     loyalty_accounts?
  messages             messages[]
  notifications        notifications[]
  orders               orders[]
  product_reviews      product_reviews[]
  product_views        product_views[]
  projects             projects[]
  promotion_audit_logs promotion_audit_logs[]
  promotion_versions   promotion_versions[]
  promotions           promotions[]
  search_queries       search_queries[]
  service_bookings     service_bookings[]
  service_reviews      service_reviews[]
  service_views        service_views[]
  support_tickets      support_tickets[]
  wishlist_items       wishlist_items[]
}

model webhooks {
  id        String   @id
  url       String
  secret    String
  events    String
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
}

model wishlist_items {
  id        String   @id
  userId    String
  productId String
  createdAt DateTime @default(now())
  updatedAt DateTime
  products  products @relation(fields: [productId], references: [id])
  users     users    @relation(fields: [userId], references: [id])

  @@unique([userId, productId])
}

model conversations {
  id         String     @id
  userId     String?
  guestId    String?
  status     String     @default("OPEN")
  createdAt  DateTime   @default(now())
  updatedAt  DateTime   @default(now())
  guestName  String?
  guestPhone String?
  users      users?     @relation(fields: [userId], references: [id])
  messages   messages[]
}

model customer_promotions {
  id              String     @id
  promotionId     String
  userId          String
  orderId         String?
  discountApplied Int?
  usedAt          DateTime   @default(now())
  status          String     @default("APPLIED")
  metadata        Json?
  createdAt       DateTime   @default(now())
  orders          orders?    @relation(fields: [orderId], references: [id])
  promotions      promotions @relation(fields: [promotionId], references: [id], onDelete: Cascade)
  users           users      @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([orderId])
  @@index([promotionId])
  @@index([usedAt])
  @@index([userId])
}

model messages {
  id             String        @id
  conversationId String
  senderId       String?
  senderType     String        @default("USER")
  content        String
  createdAt      DateTime      @default(now())
  conversations  conversations @relation(fields: [conversationId], references: [id])
  users          users?        @relation(fields: [senderId], references: [id])
}

model promotion_analytics {
  id             String     @id
  promotionId    String
  date           DateTime
  impressions    Int        @default(0)
  clicks         Int        @default(0)
  conversions    Int        @default(0)
  revenueImpact  Decimal    @default(0) @db.Decimal(10, 2)
  discountGiven  Decimal    @default(0) @db.Decimal(10, 2)
  usageCount     Int        @default(0)
  avgOrderValue  Decimal?   @db.Decimal(10, 2)
  conversionRate Decimal?   @db.Decimal(5, 2)
  roi            Decimal?   @db.Decimal(5, 2)
  metadata       Json?
  createdAt      DateTime   @default(now())
  updatedAt      DateTime
  promotions     promotions @relation(fields: [promotionId], references: [id], onDelete: Cascade)

  @@unique([promotionId, date])
  @@index([date])
  @@index([promotionId])
}

model promotion_audit_logs {
  id          String     @id
  promotionId String
  userId      String?
  action      String
  oldValues   Json?
  newValues   Json?
  reason      String?
  ipAddress   String?
  userAgent   String?
  createdAt   DateTime   @default(now())
  promotions  promotions @relation(fields: [promotionId], references: [id], onDelete: Cascade)
  users       users?     @relation(fields: [userId], references: [id])

  @@index([action])
  @@index([createdAt])
  @@index([promotionId])
  @@index([userId])
}

model promotion_versions {
  id            String     @id
  promotionId   String
  versionNumber Int
  data          Json
  createdBy     String?
  createdAt     DateTime   @default(now())
  users         users?     @relation(fields: [createdBy], references: [id])
  promotions    promotions @relation(fields: [promotionId], references: [id], onDelete: Cascade)

  @@unique([promotionId, versionNumber])
}

model promotions_categories {
  id          String     @id
  promotionId String
  categoryId  String
  createdAt   DateTime   @default(now())
  categories  categories @relation(fields: [categoryId], references: [id], onDelete: Cascade)
  promotions  promotions @relation(fields: [promotionId], references: [id], onDelete: Cascade)

  @@unique([promotionId, categoryId])
  @@index([categoryId])
  @@index([promotionId])
}

model promotions_products {
  id          String     @id
  promotionId String
  productId   String
  createdAt   DateTime   @default(now())
  products    products   @relation(fields: [productId], references: [id], onDelete: Cascade)
  promotions  promotions @relation(fields: [promotionId], references: [id], onDelete: Cascade)

  @@unique([promotionId, productId])
  @@index([productId])
  @@index([promotionId])
}

model support_tickets {
  id          String   @id
  subject     String
  description String
  status      String   @default("OPEN")
  priority    String   @default("MEDIUM")
  userId      String?
  email       String
  name        String
  assignedTo  String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime
  users       users?   @relation(fields: [userId], references: [id])

  @@index([priority])
  @@index([status])
  @@index([userId])
}

model faqs {
  id           String   @id @default(cuid())
  question     String
  answer       String
  category     String?
  displayOrder Int      @default(0)
  isActive     Boolean  @default(true)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  @@index([displayOrder])
  @@index([isActive])
}

enum CampaignStatus {
  DRAFT
  SCHEDULED
  SENT
  CANCELLED
}

enum CampaignType {
  PROMOTIONAL
  NEWSLETTER
  PRODUCT_UPDATE
  WELCOME
  ABANDONED_CART
  EMAIL
  SMS
  PUSH
  SOCIAL
}

enum ReviewStatus {
  PENDING
  APPROVED
  REJECTED
}
